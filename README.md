# low-mid-girl

Official Homepage of 6ow-3id-girl (low mid girl)

***

## Environments

- Application Infrastructures
  - This application would be implemented basically based on GCP(Google Cloud Platform) stacks
    - `GAE: Google App Engine`
      - With this app, we use `SE (Standard Edition)` where `Express` app deployed
    - `Cloud Build`
      - For application buildings, we use Cloud Build when some codes would be updated
      - As GAE also internally uses `Cloud Build`, we provide some parameters for customizations of application builds with configuration file, `cloudbuild-app.yaml`
    - `GCS: Google Cloud Storage`
      - For artifacts of app, which are automatically generated by Cloud Build, would be stored in GCS bucket
    - `Berglas`
      - Also for storing secrets for apps, which would be encrypted by `Google KMS` keys & keypairs, we use `Berglas` tools
        - Though Berglas is not offical products of GCP, but are developed by Google
        - For more information about Berglas, please refer the link below:
          - <https://github.com/GoogleCloudPlatform/berglas>
      - With features of Berglas, we have some choices for its backends, `GCS` and `Secret Manager`
        - With this app, we use `GCS` for Berglas backends, and we can manage them directly with `berglas` CLI and `gsutil`
    - `Google Domains`
      - For using custom domains of this application, we purchased it with `Google Domains`, which are domain services managed by Google
      - Also for secure connections, we added SSL configurations to the app with the feature of Google Domains

- Runtime and Component versions
  - Node.js: `v13.12.0`
    - with using `nodebrew` for split Node.js version
  - npm: `6.14.4`
  - Express: `4.16.1`

***

## GitOps: Build integrations

- `Cloud Build`
  - With configurations of Google Cloud Build, we can set some `Triggers` to kick build process on GCP
    - On this app, we consider providing GitHub name of this app, and make Cloud Buiild fetch updates from GitHub sources
    - Or, you can integrate Cloud Build & GitHub repository with application already existed in GitHub marketplaces
      - Please go to the links below and install the apps in your GitHub repository
      - <https://github.com/marketplace/google-cloud-build>
  - Also, you can provide further more configurations about build behaviors in configuration files (YAML / JSON) of Cloud Build
    - Note that the name of build configuraton file should not be `cloudbuild.yaml` or `cloudbuild.json`
    - This is because GAE would also use Cloud build services with internal processes, so the name conflicts would be occured if you provide the name same default name of configurations files
  - After you added trigger configurations in GCP console, you can check them with `gcloud` commands if you install alpha components

```bash
# Install gcloud alpha components
$ gcloud components install alpha [--quiet]

# Show configurations of build
$ gcloud alpha builds triggers describe cd-github-low-mid-girl-master
createTime: '2021-02-16T23:08:29.093539445Z'
description: Automatically deploy 6ow-3id-Girl app to GAE
filename: cloudbuild-app.yaml
github:
  name: low-mid-girl
  owner: hwakabh
  push:
    branch: ^master$
id: ee9d588f-7f37-42e1-807b-e82810d3297c
name: cd-github-low-mid-girl-master
```

- `Slack notifications`
  - For fetching push notifications from GitHub, you can configure Slack apps with your GitHub repository
  - Please refer the detailed information with the following link
    - <https://slack.github.com/>

***

## Running and debug locally

- Install `nodebrew`
  - Install specific version of Node.js
    - `nodebrew install v13.12.0`
    - `nodebrew use v13.12.0`
  - Note after installation of nodebrew, we can use `node` & `npm` commands
    - Please make sure of verifying your Node.js version with the command `node --version`
  - As you're using another Node.js version controlling systems, like `nvm` or `nodist`, please official references of them
- Setting up required packages with `npm
  - `npm install`
  - `npm list`

- Run with local web server
  - `node bin/www`
    - The default ports for Node.js use is `TCP/3000`
  - If you've already use the port, you can modify them in `bin/www`

```javascript
/**
 * Get port from environment and store in Express.
 */

var port = normalizePort(process.env.PORT || '3000');
app.set('port', port);

```

***

## License

- This application is licensed by MIT License since basically using Node.js.
